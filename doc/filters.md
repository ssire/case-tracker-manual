# Case Tracker Javascript Filters

## The `autofill` filter

> In: lib/extensions.js
>
> usually generated in form.xql to inject @base-url in the autofill_url attribute

The `autofill` filter listens for data updates in a host input field in an editor and responds by loading data from a web service into an autofill target fragment within the editor.

Data updates are triggered when user changes the host field value. In addition the filter can also listen to the `axel-content-ready` event of the editor to react to document loading with the `autofill_container` attribute.

The `autofill` filter is usually applied on a drop down selector list (a `choice` plugin with or without a `select2` filter).

Mandatory attributes :

* `autofill_url` : defines the web service to request to load XML data into the autofill target, the URL can use the `$_` variable that will be replaced with the host field current value

Optional attributes :

* `autofill_container` : CSS selector of closest ancestor HTML element of the host field, it must correspond to the editor container, when this parameter is defined the filter also reacts to 'axel-content-ready' (editor's load completion event), this is useful for implementing lightweight transclusion
* `autofill_root` / `autofill_target` : CSS selector(s) of the subtree to fill with data, if not defined filling starts at the first ancestor of the host element handle that matches the autofill_target selector 

Example :

*line breaks added for clarity in param attribute*

```xml
 <xt:use types="choice" values="1 2 3 ..." i18n="XXX YYY ZZZ ..."
  param="filter=select2 autofill;
  autofill_target=.x-ClientEnterprise;
  autofill_url=/exist/projects/scaffold/enterprises/$_.blend?goal=autofill;
  autofill_container=div.c-autofill-border;multiple=no;typeahead=yes;
  select2_minimumInputLength=2;select2_dropdownAutoWidth=true;select2_width=off;
  class=span12 a-control;"></xt:use>
```

Note that the example above contains a development URL with an `/exist/projects/scaffold` prefix. This is most probably because it has been generated by concatenating the oppidum command base URL in a helper function defined in a `form.xql` model. The prefix would be different when running in production.